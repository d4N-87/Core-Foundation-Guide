import"../chunks/DsnmJJEf.js";import"../chunks/ctJiNxf1.js";import{o as vt,d as mt,e as G,s as q}from"../chunks/B-icdhcA.js";import{ak as bt,o as xt,av as yt,aw as wt,am as kt,a0 as St,p as ut,n as t,m as D,l as Ct,j as X,i as Rt,d as _,s as b,f as Y,a as h,e as dt,k as C,g as u,r as s,u as n,t as B,ax as Vt}from"../chunks/Dv9Va7Iy.js";import{i as j}from"../chunks/BGc_5KK-.js";import{e as ft,i as pt,f as At,g as $,s as It}from"../chunks/Cmlm8h2R.js";import{t as lt,h as Ut}from"../chunks/AGRw3LU9.js";import{b as Bt}from"../chunks/C7sTqTmI.js";import{i as ht}from"../chunks/BfGA2QYN.js";import{p as Z}from"../chunks/DUX4vovL.js";import{s as jt,a as qt}from"../chunks/BU9Ixn5H.js";import{g as ct}from"../chunks/DdPt9bVq.js";import{S as zt}from"../chunks/BoPAQx1w.js";const Mt=!0;function _t(a,i,w=!1){if(a.multiple){if(i==null)return;if(!yt(i))return wt();for(var f of a.options)f.selected=i.includes(J(f));return}for(f of a.options){var v=J(f);if(kt(v,i)){f.selected=!0;return}}(!w||i!==void 0)&&(a.selectedIndex=-1)}function Ot(a){var i=new MutationObserver(()=>{_t(a,a.__value)});i.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),St(()=>{i.disconnect()})}function Lt(a,i,w=i){var f=!0;bt(a,"change",v=>{var l=v?"[selected]":":checked",o;if(a.multiple)o=[].map.call(a.querySelectorAll(l),J);else{var x=a.querySelector(l)??a.querySelector("option:not([disabled])");o=x&&J(x)}w(o)}),xt(()=>{var v=i();if(_t(a,v,f),f&&v===void 0){var l=a.querySelector(":checked");l!==null&&(v=J(l),w(v))}a.__value=v,f=!1}),Ot(a)}function J(a){return"__value"in a?a.__value:a.value}const Wt=Mt;var $t=_('<button aria-label="Play" class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-amber-500 text-slate-900 transition-transform hover:scale-110"><svg class="h-6 w-6"><use href="#icon-play"></use></svg></button>'),Dt=_('<button aria-label="Stop" class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-cyan-500 text-slate-900 transition-transform hover:scale-110"><svg class="h-6 w-6"><use href="#icon-stop"></use></svg></button>'),Tt=_('<span class="text-cyan-400"> </span>'),Et=_("<span> </span>"),Pt=_('<button aria-label="Audio settings" class="ml-auto shrink-0 text-slate-400 transition-colors hover:text-white"><svg class="h-6 w-6"><use href="#icon-settings"></use></svg></button>'),Ft=_("<option> </option>"),Ht=_('<div class="space-y-2 border-t border-cyan-900/50 pt-3"><div><label for="voice-select" class="mb-1 block text-xs font-medium text-slate-400"> </label> <select id="voice-select" class="w-full rounded-md border-2 border-slate-700 bg-slate-900/50 px-2 py-1 text-sm text-white focus:border-cyan-400 focus:outline-none"></select></div></div>'),Gt=_('<div class="space-y-3 rounded-lg border border-cyan-900/50 bg-slate-900/30 p-4 backdrop-blur-sm"><div class="flex items-center gap-4"><!> <div class="text-sm font-semibold text-slate-300"><!></div>  <!></div>  <!></div>'),Jt=_('<svg class="hidden"><symbol id="icon-play" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></symbol><symbol id="icon-stop" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h12v12H6z"></path></symbol><symbol id="icon-settings" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></symbol></svg> <!>',1);function Kt(a,i){ut(i,!1);let w=Z(i,"text",8),f=Z(i,"lang",8),v=Z(i,"t",8),l,o,x=D(!1),R=D(!1),z=D(!1),p=D([]),y=D(null);function k(){"speechSynthesis"in window&&(C(x,!0),l=window.speechSynthesis)}function d(){const S=l.getVoices();if(C(p,S.filter(c=>c.lang.startsWith(f()))),!t(y)&&t(p).length>0){const c=["natural","online","google"];let g=t(p).find(V=>c.some(H=>V.name.toLowerCase().includes(H)));C(y,(g||t(p)[0]).voiceURI)}}function tt(){if(o=new SpeechSynthesisUtterance(w()),o.lang=f(),t(y)){const S=t(p).find(c=>c.voiceURI===t(y));S&&(o.voice=S)}o.pitch=1,o.rate=1,o.onstart=()=>{C(R,!0)},o.onend=()=>{C(R,!1)}}function T(){C(R,!0),l.cancel(),tt(),l.speak(o)}function E(){C(R,!1),l.cancel()}vt(()=>{k(),t(x)&&(l.onvoiceschanged=d,d())}),mt(()=>{l&&l.cancel()}),Ct(()=>(X(w()),t(x)),()=>{w()&&Wt&&t(x)&&E()}),Rt(),ht();var P=Jt(),F=b(Y(P),2);{var et=S=>{var c=Gt(),g=u(c),V=u(g);{var H=e=>{var r=$t();G("click",r,T),h(e,r)},K=e=>{var r=Dt();G("click",r,E),h(e,r)};j(V,e=>{t(R)?e(K,!1):e(H)})}var M=b(V,2),at=u(M);{var N=e=>{var r=Tt(),U=u(r,!0);s(r),B(()=>q(U,(X(v()),n(()=>v().playing)))),h(e,r)},rt=e=>{var r=Et(),U=u(r,!0);s(r),B(()=>q(U,(X(v()),n(()=>v().listenToArticle)))),h(e,r)};j(at,e=>{t(R)?e(N):e(rt,!1)})}s(M);var Q=b(M,2);{var ot=e=>{var r=Pt();G("click",r,()=>C(z,!t(z))),h(e,r)};j(Q,e=>{t(p),n(()=>t(p).length>1)&&e(ot)})}s(g);var nt=b(g,2);{var A=e=>{var r=Ht(),U=u(r),W=u(U),st=u(W,!0);s(W);var I=b(W,2);B(()=>{t(y),Vt(()=>{t(p)})}),ft(I,5,()=>t(p),pt,(O,m)=>{var L=Ft(),gt=u(L);s(L);var it={};B(()=>{q(gt,`${t(m),n(()=>t(m).name)??""} (${t(m),n(()=>t(m).lang)??""})`),it!==(it=(t(m),n(()=>t(m).voiceURI)))&&(L.value=(L.__value=(t(m),n(()=>t(m).voiceURI)))??"")}),h(O,L)}),s(I),s(U),s(r),B(()=>q(st,(X(v()),n(()=>v().voice)))),Lt(I,()=>t(y),O=>C(y,O)),G("change",I,T),h(e,r)};j(nt,e=>{t(z),t(p),n(()=>t(z)&&t(p).length>1)&&e(A)})}s(c),h(S,c)};j(F,S=>{t(x)&&S(et)})}h(a,P),dt()}var Nt=_('<div class="not-prose my-8"><!></div>'),Qt=_('<li><a target="_blank" rel="noopener noreferrer" class="text-cyan-400 transition-colors hover:text-amber-400 hover:underline"> </a></li>'),Xt=_("<hr/> <h2> </h2> <ol></ol>",1),Yt=_('<button class="mb-8 block font-semibold text-cyan-400 transition-colors hover:text-amber-400"> </button> <article class="prose prose-invert prose-strong:text-amber-400 prose-hr:border-cyan-500/30 prose-ol:text-gray-400 lg:prose-xl"><h1> </h1> <!>  <!>  <!></article>',1),Zt=_(`<!> <div class="flex w-full flex-grow items-center justify-center p-4 md:p-8"><div class="w-full max-w-4xl rounded-xl
           bg-gradient-to-br from-cyan-950/20 to-slate-950/10
           backdrop-blur-lg border-2 border-cyan-500/30
           shadow-2xl shadow-cyan-900/50
           p-6 md:p-10" style="visibility: hidden;"><!></div></div>`,1);function fe(a,i){ut(i,!1);const w=()=>qt(lt,"$transitionStore",f),[f,v]=jt();let l=Z(i,"data",8);const o=l().post,x=l().translations,R=l().seo,z=l().textContent,p=o?.lang,y=p&&x?x[p]:At;let k=D(),d=null;vt(()=>{if(d=w()?.rect||null,lt.set(null),!d){$.to(t(k),{autoAlpha:1,duration:.3});return}$.delayedCall(.01,()=>{const g=t(k).getBoundingClientRect();d&&($.set(t(k),{position:"fixed",top:d.top,left:d.left,width:d.width,height:d.height,margin:0,zIndex:50}),$.to(t(k),{top:g.top,left:g.left,width:g.width,height:g.height,duration:.4,ease:"power3.inOut",autoAlpha:1,onComplete:()=>{$.set(t(k),{position:"relative",top:"auto",left:"auto",width:"100%",height:"auto",overwrite:!0})}}))})});async function tt(){const c=o?.lang||"it";if(!d){await ct(`/${c}`);return}await $.to(t(k),{top:d.top,left:d.left,width:d.width,height:d.height,duration:.4,ease:"power3.inOut",autoAlpha:0}).then(),await ct(`/${c}`)}ht();var T=Zt(),E=Y(T);zt(E,{get title(){return n(()=>R.title)},get description(){return n(()=>R.description)}});var P=b(E,2),F=u(P),et=u(F);{var S=c=>{var g=Yt(),V=Y(g),H=u(V);s(V);var K=b(V,2),M=u(K),at=u(M,!0);s(M);var N=b(M,2);{var rt=A=>{var e=Nt(),r=u(e);Kt(r,{get text(){return z},get lang(){return n(()=>o.lang)},get t(){return y}}),s(e),h(A,e)};j(N,A=>{z&&A(rt)})}var Q=b(N,2);Ut(Q,()=>n(()=>o.content));var ot=b(Q,2);{var nt=A=>{var e=Xt(),r=b(Y(e),2),U=u(r,!0);s(r);var W=b(r,2);ft(W,5,()=>n(()=>o.sources),pt,(st,I)=>{var O=Qt(),m=u(O),L=u(m,!0);s(m),s(O),B(()=>{It(m,"href",(t(I),n(()=>t(I).url))),q(L,(t(I),n(()=>t(I).text)))}),h(st,O)}),s(W),B(()=>q(U,n(()=>y.sources))),h(A,e)};j(ot,A=>{n(()=>o.sources&&o.sources.length>0)&&A(nt)})}s(K),B(()=>{q(H,`← ${n(()=>y.backToArticles)??""}`),q(at,n(()=>o.title))}),G("click",V,tt),h(c,g)};j(et,c=>{o&&c(S)})}s(F),Bt(F,c=>C(k,c),()=>t(k)),s(P),h(a,T),dt(),v()}export{fe as component};
